<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bitvector (herdtools7.Asllib.Bitvector)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">herdtools7</a> &#x00BB; <a href="../index.html">Asllib</a> &#x00BB; Bitvector</nav><header class="odoc-preamble"><h1>Module <code><span>Asllib.Bitvector</span></code></h1><p>This module provide an interface to ASL bitvector, and main operations on it.</p></header><nav class="odoc-toc"><ul><li><a href="#constructors">Constructors</a></li><li><a href="#exports">Exports</a></li><li><a href="#operations-on-bitvectors">Operations on bitvectors</a></li><li><a href="#bitvector-masks">Bitvector masks</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Represent a bitvector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>The length of the bitvector.</p></div></div><h3 id="constructors"><a href="#constructors" class="anchor"></a>Constructors</h3><div class="odoc-spec"><div class="spec value anchored" id="val-one"><a href="#val-one" class="anchor"></a><code><span><span class="keyword">val</span> one : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>A length 1 bitvector with a 1 bit inside.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span><span class="keyword">val</span> zero : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>A length 1 bitvector with a 0 bit inside.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>A length 0 bitvector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ones"><a href="#val-ones" class="anchor"></a><code><span><span class="keyword">val</span> ones : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>ones n</code> is a bitvector of length <code>n</code> with every bit set.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zeros"><a href="#val-zeros" class="anchor"></a><code><span><span class="keyword">val</span> zeros : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>zeros n</code> is a bitvector of length <code>n</code> without any bit set.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span><span class="keyword">val</span> of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_string s</code> interpretes <code>s</code> as a right-indexed representation of a bitvector. Characters others than '0' or '1' are ignored. The length of <code>of_string s</code> is equal to the number of such characters in <code>s</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_int"><a href="#val-of_int" class="anchor"></a><code><span><span class="keyword">val</span> of_int : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_int i</code> is the bitvector of length <code>Sys.int_size</code> (e.g. 63) that corresponds to <code>i</code> in little-endian, i.e. index 0 (for slicing operations corresponds to <code>i mod 2</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_int_sized"><a href="#val-of_int_sized" class="anchor"></a><code><span><span class="keyword">val</span> of_int_sized : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_int n i</code> is the bitvector of length <code>n</code> that corresponds to <code>i</code> in little-endian, i.e. index 0 (for slicing operations corresponds to <code>i mod 2</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_int64"><a href="#val-of_int64" class="anchor"></a><code><span><span class="keyword">val</span> of_int64 : <span>int64 <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_int i</code> is the bitvector of length 64 that corresponds to <code>i</code> in little-endian, i.e. index 0 (for slicing operations corresponds to <code>i mod 2</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_z"><a href="#val-of_z" class="anchor"></a><code><span><span class="keyword">val</span> of_z : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Z</span>.t <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_int sz i</code> is the bitvector of length <code>sz</code> that corresponds to <code>i</code> in little-endian.</p></div></div><h3 id="exports"><a href="#exports" class="anchor"></a>Exports</h3><div class="odoc-spec"><div class="spec value anchored" id="val-pp_t"><a href="#val-pp_t" class="anchor"></a><code><span><span class="keyword">val</span> pp_t : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print the bitvector, indexed from the right, as a serie of '0' and '1', delimited by apostrophes. Inside a horizontal box.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns a string representing the bitvector, indexed from the right and delimited by apostrophes.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_int"><a href="#val-to_int" class="anchor"></a><code><span><span class="keyword">val</span> to_int : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns an integer representing the bitvector, little-endian. Result unspecified if <code>length &gt; Sys.int_size</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_int_signed"><a href="#val-to_int_signed" class="anchor"></a><code><span><span class="keyword">val</span> to_int_signed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns a signed integer representing the bitvector.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_int64_unsigned"><a href="#val-to_int64_unsigned" class="anchor"></a><code><span><span class="keyword">val</span> to_int64_unsigned : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p>Returns an integer representing the bitvector, little-endian. Result unspecified if <code>length &gt; 64</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_int64_signed"><a href="#val-to_int64_signed" class="anchor"></a><code><span><span class="keyword">val</span> to_int64_signed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p>Returns an integer representing the bitvector, little-endian. Result unspecified if <code>length &gt; 64</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_z_unsigned"><a href="#val-to_z_unsigned" class="anchor"></a><code><span><span class="keyword">val</span> to_z_unsigned : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_z_signed"><a href="#val-to_z_signed" class="anchor"></a><code><span><span class="keyword">val</span> to_z_signed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-printable"><a href="#val-printable" class="anchor"></a><code><span><span class="keyword">val</span> printable : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Z</span>.t</span></code></div></div><h3 id="operations-on-bitvectors"><a href="#operations-on-bitvectors" class="anchor"></a>Operations on bitvectors</h3><div class="odoc-spec"><div class="spec value anchored" id="val-lognot"><a href="#val-lognot" class="anchor"></a><code><span><span class="keyword">val</span> lognot : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bitwise not operation.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if lengths are different.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logand"><a href="#val-logand" class="anchor"></a><code><span><span class="keyword">val</span> logand : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bitwise and operation.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if lengths are different.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logor"><a href="#val-logor" class="anchor"></a><code><span><span class="keyword">val</span> logor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bitwise or operation.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if lengths are different.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-logxor"><a href="#val-logxor" class="anchor"></a><code><span><span class="keyword">val</span> logxor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Bitwise xor operation.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if lengths are different.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>equal b1 b2</code> is <code>true</code> if and only if <code>b1</code> and <code>b2</code> are bitwise equal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>The comparison function for bitvectors, with the same specification as <code>Stdlib.compare</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sign_extend"><a href="#val-sign_extend" class="anchor"></a><code><span><span class="keyword">val</span> sign_extend : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>sign_extend nbytes bv</code> returns a copy of bv of length <code>8*nbytes</code>, left-padded with <code>bv</code>'s bit-sign.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitcount"><a href="#val-bitcount" class="anchor"></a><code><span><span class="keyword">val</span> bitcount : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the number of bits set to 1.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-highest_set_bit"><a href="#val-highest_set_bit" class="anchor"></a><code><span><span class="keyword">val</span> highest_set_bit : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the index of the highest set bit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extract_slice"><a href="#val-extract_slice" class="anchor"></a><code><span><span class="keyword">val</span> extract_slice : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>extract_slice src positions</code> returns a bitvector whose <code>i</code>-th bit is the bit of <code>src</code> whose index is the <code>i</code>-th element of <code>positions</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if any index in positions is greater or equal to the length of <code>src</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_slice"><a href="#val-write_slice" class="anchor"></a><code><span><span class="keyword">val</span> write_slice : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>write_slice dst src positions</code> is a copy of <code>dst</code> where each bit at index <code>i</code> in <code>src</code> has been written in <code>dst</code> at the index given by the <code>i</code>-th element of <code>positions</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">Invalid_argument</span> <p>if <code>positions</code> has not the same length as <code>src</code>, or any of the indexes in <code>positions</code> is greater than the length of <code>dst</code>.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span><span class="keyword">val</span> concat : <span><span><a href="#type-t">t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>concat [bv2; bv1; bv0]</code> is the concatenation of <code>bv0</code>, <code>bv1</code>, and <code>bv2</code>, in this order, i.e. if <code>bv0</code> is not empty, the following is true:</p><pre class="language-ocaml"><code>equal (extract_slice (concat [bv1; bv0]) [ 0 ]) (extract_slice bv0 [ 0 ])</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_zeros"><a href="#val-is_zeros" class="anchor"></a><code><span><span class="keyword">val</span> is_zeros : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_zeros bv</code> is true if every bit of bv is unset.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_ones"><a href="#val-is_ones" class="anchor"></a><code><span><span class="keyword">val</span> is_ones : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_ones bv</code> is true if every bit of bv is set.</p></div></div><h3 id="bitvector-masks"><a href="#bitvector-masks" class="anchor"></a>Bitvector masks</h3><p>Bitvector in ASL can be matched against masks, that have the same syntax than bitvectors, with an extra possible bit: <code>'x'</code>. This bits indicates that the mask would match against any bit at this position.</p><p>For example:</p><pre class="language-ocaml"><code>assert ('01' IN {'01'}) == TRUE;
assert ('01' IN {'0x'}) == TRUE;
assert ('10' IN {'0x'}) == FALSE;</code></pre><div class="odoc-spec"><div class="spec type anchored" id="type-mask"><a href="#type-mask" class="anchor"></a><code><span><span class="keyword">type</span> mask</span></code></div><div class="spec-doc"><p>Internal representation of a mask.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_length"><a href="#val-mask_length" class="anchor"></a><code><span><span class="keyword">val</span> mask_length : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the length of bitvectors matched by this mask.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_of_string"><a href="#val-mask_of_string" class="anchor"></a><code><span><span class="keyword">val</span> mask_of_string : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-mask">mask</a></span></code></div><div class="spec-doc"><p>Build a mask from its ASL representation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-matches"><a href="#val-matches" class="anchor"></a><code><span><span class="keyword">val</span> matches : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>matches mask bv</code> is true iff <code>bv</code> matches <code>mask</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_to_string"><a href="#val-mask_to_string" class="anchor"></a><code><span><span class="keyword">val</span> mask_to_string : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns an ASL string matching its value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_to_canonical_string"><a href="#val-mask_to_canonical_string" class="anchor"></a><code><span><span class="keyword">val</span> mask_to_canonical_string : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns a unique ASL string matching its value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_set"><a href="#val-mask_set" class="anchor"></a><code><span><span class="keyword">val</span> mask_set : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mask_set m</code>'s set bits are those required set by <code>m</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_unset"><a href="#val-mask_unset" class="anchor"></a><code><span><span class="keyword">val</span> mask_unset : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mask_unset m</code>'s set bits are those required unset by <code>m</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mask_specified"><a href="#val-mask_specified" class="anchor"></a><code><span><span class="keyword">val</span> mask_specified : <span><a href="#type-mask">mask</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mask_specified m</code>'s set bits are those require set or unset by <code>m</code>.</p></div></div></div></body></html>