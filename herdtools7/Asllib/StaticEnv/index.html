<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>StaticEnv (herdtools7.Asllib.StaticEnv)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">herdtools7</a> &#x00BB; <a href="../index.html">Asllib</a> &#x00BB; StaticEnv</nav><header class="odoc-preamble"><h1>Module <code><span>Asllib.StaticEnv</span></code></h1><p>Static Environment used for type-checking (cf <a href="../Typing/index.html"><code>Typing</code></a>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-func_sig"><a href="#type-func_sig" class="anchor"></a><code><span><span class="keyword">type</span> func_sig</span><span> = <span>unit <a href="../AST/index.html#type-func">AST.func</a></span></span></code></div><div class="spec-doc"><p>Type signature for functions, some kind of an arrow type, with added informations.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-global"><a href="#type-global" class="anchor"></a><code><span><span class="keyword">type</span> global</span><span> = </span><span>{</span></code><ol><li id="type-global.declared_types" class="def record field anchored"><a href="#type-global.declared_types" class="anchor"></a><code><span>declared_types : <span><a href="../AST/index.html#type-ty">AST.ty</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps a type name t to its declaration.</p><span class="comment-delim">*)</span></div></li><li id="type-global.constants_values" class="def record field anchored"><a href="#type-global.constants_values" class="anchor"></a><code><span>constants_values : <span><a href="../AST/index.html#type-literal">AST.literal</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps a global constant name to its value.</p><span class="comment-delim">*)</span></div></li><li id="type-global.storage_types" class="def record field anchored"><a href="#type-global.storage_types" class="anchor"></a><code><span>storage_types : <span><span>(<a href="../AST/index.html#type-ty">AST.ty</a> * <a href="../AST/index.html#type-global_decl_keyword">AST.global_decl_keyword</a>)</span> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps global declared storage elements to their types.</p><span class="comment-delim">*)</span></div></li><li id="type-global.subtypes" class="def record field anchored"><a href="#type-global.subtypes" class="anchor"></a><code><span>subtypes : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps an identifier s to its parent in the subtype relation.</p><span class="comment-delim">*)</span></div></li><li id="type-global.subprograms" class="def record field anchored"><a href="#type-global.subprograms" class="anchor"></a><code><span>subprograms : <span><a href="#type-func_sig">func_sig</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps each subprogram runtime name to its signature.</p><span class="comment-delim">*)</span></div></li><li id="type-global.subprogram_renamings" class="def record field anchored"><a href="#type-global.subprogram_renamings" class="anchor"></a><code><span>subprogram_renamings : <span><a href="../ASTUtils/ISet/index.html#type-t">ASTUtils.ISet.t</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps each subprogram declared name to the equivalence class of all the subprogram runtime names that were declared with this name.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Store all the global environment information at compile-time.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-local"><a href="#type-local" class="anchor"></a><code><span><span class="keyword">type</span> local</span><span> = </span><span>{</span></code><ol><li id="type-local.constants_values" class="def record field anchored"><a href="#type-local.constants_values" class="anchor"></a><code><span>constants_values : <span><a href="../AST/index.html#type-literal">AST.literal</a> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps a local constant to its value.</p><span class="comment-delim">*)</span></div></li><li id="type-local.storage_types" class="def record field anchored"><a href="#type-local.storage_types" class="anchor"></a><code><span>storage_types : <span><span>(<a href="../AST/index.html#type-ty">AST.ty</a> * <a href="../AST/index.html#type-local_decl_keyword">AST.local_decl_keyword</a>)</span> <a href="../ASTUtils/IMap/index.html#type-t">ASTUtils.IMap.t</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Maps an locally declared names to their type.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Store all the local environment information at compile-time.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-env"><a href="#type-env" class="anchor"></a><code><span><span class="keyword">type</span> env</span><span> = </span><span>{</span></code><ol><li id="type-env.global" class="def record field anchored"><a href="#type-env.global" class="anchor"></a><code><span>global : <a href="#type-global">global</a>;</span></code></li><li id="type-env.local" class="def record field anchored"><a href="#type-env.local" class="anchor"></a><code><span>local : <a href="#type-local">local</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>The static environment type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ast_func_to_func_sig"><a href="#val-ast_func_to_func_sig" class="anchor"></a><code><span><span class="keyword">val</span> ast_func_to_func_sig : <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-func">AST.func</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-func_sig">func_sig</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_env"><a href="#val-pp_env" class="anchor"></a><code><span><span class="keyword">val</span> pp_env : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_global"><a href="#val-pp_global" class="anchor"></a><code><span><span class="keyword">val</span> pp_global : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-global">global</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_global"><a href="#val-empty_global" class="anchor"></a><code><span><span class="keyword">val</span> empty_global : <a href="#type-global">global</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_local"><a href="#val-empty_local" class="anchor"></a><code><span><span class="keyword">val</span> empty_local : <a href="#type-local">local</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookup_constants"><a href="#val-lookup_constants" class="anchor"></a><code><span><span class="keyword">val</span> lookup_constants : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-literal">AST.literal</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_of"><a href="#val-type_of" class="anchor"></a><code><span><span class="keyword">val</span> type_of : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_of_opt"><a href="#val-type_of_opt" class="anchor"></a><code><span><span class="keyword">val</span> type_of_opt : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-ty">AST.ty</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mem_constants"><a href="#val-mem_constants" class="anchor"></a><code><span><span class="keyword">val</span> mem_constants : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_subprogram"><a href="#val-add_subprogram" class="anchor"></a><code><span><span class="keyword">val</span> add_subprogram : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-func_sig">func_sig</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_renamings"><a href="#val-set_renamings" class="anchor"></a><code><span><span class="keyword">val</span> set_renamings : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../ASTUtils/ISet/index.html#type-t">ASTUtils.ISet.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_global_storage"><a href="#val-add_global_storage" class="anchor"></a><code><span><span class="keyword">val</span> add_global_storage : 
  <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-global_decl_keyword">AST.global_decl_keyword</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_type"><a href="#val-add_type" class="anchor"></a><code><span><span class="keyword">val</span> add_type : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_global_constant"><a href="#val-add_global_constant" class="anchor"></a><code><span><span class="keyword">val</span> add_global_constant : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-literal">AST.literal</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_local_constant"><a href="#val-add_local_constant" class="anchor"></a><code><span><span class="keyword">val</span> add_local_constant : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-literal">AST.literal</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_local"><a href="#val-add_local" class="anchor"></a><code><span><span class="keyword">val</span> add_local : 
  <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-local_decl_keyword">AST.local_decl_keyword</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_subtype"><a href="#val-add_subtype" class="anchor"></a><code><span><span class="keyword">val</span> add_subtype : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_undefined"><a href="#val-is_undefined" class="anchor"></a><code><span><span class="keyword">val</span> is_undefined : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div></div></body></html>