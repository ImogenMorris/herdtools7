<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ASTUtils (herdtools7.Asllib.ASTUtils)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">herdtools7</a> &#x00BB; <a href="../index.html">Asllib</a> &#x00BB; ASTUtils</nav><header class="odoc-preamble"><h1>Module <code><span>Asllib.ASTUtils</span></code></h1><p>This module provides some tools to work on ASL ASTs.</p></header><nav class="odoc-toc"><ul><li><a href="#identifiers-utils">Identifiers utils</a></li><li><a href="#position-utils">Position utils</a></li><li><a href="#type-utils">Type utils</a></li><li><a href="#constructor-helpers">Constructor helpers</a></li><li><a href="#fields,-masks-and-slices-handling">Fields, masks and slices handling</a></li><li><a href="#equality-helpers">Equality helpers</a></li><li><a href="#transformers">Transformers</a></li><li><a href="#def/use-analysis">Def/use analysis</a></li><li><a href="#standard-functions">Standard functions</a></li></ul></nav><div class="odoc-content"><h2 id="identifiers-utils"><a href="#identifiers-utils" class="anchor"></a>Identifiers utils</h2><div class="odoc-spec"><div class="spec module anchored" id="module-ISet"><a href="#module-ISet" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ISet/index.html">ISet</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An extended <code>identifier</code> set.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-IMap"><a href="#module-IMap" class="anchor"></a><code><span><span class="keyword">module</span> <a href="IMap/index.html">IMap</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An extended <code>identifier</code> map.</p></div></div><h2 id="position-utils"><a href="#position-utils" class="anchor"></a>Position utils</h2><div class="odoc-spec"><div class="spec value anchored" id="val-dummy_pos"><a href="#val-dummy_pos" class="anchor"></a><code><span><span class="keyword">val</span> dummy_pos : <span class="xref-unresolved">Stdlib</span>.Lexing.position</span></code></div><div class="spec-doc"><p>A dummy position.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-annotated"><a href="#val-annotated" class="anchor"></a><code><span><span class="keyword">val</span> annotated : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-position">AST.position</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-position">AST.position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p><code>annotated v start end</code> is <code>v</code> with location specified as from <code>start</code> to <code>end</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_dummy_pos"><a href="#val-add_dummy_pos" class="anchor"></a><code><span><span class="keyword">val</span> add_dummy_pos : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p>Add a dummy location annotation to a value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dummy_annotated"><a href="#val-dummy_annotated" class="anchor"></a><code><span><span class="keyword">val</span> dummy_annotated : <span>unit <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p>A dummy location</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_pos"><a href="#val-to_pos" class="anchor"></a><code><span><span class="keyword">val</span> to_pos : <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p>Removes the value from an annotated record.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_pos_from_pos_of"><a href="#val-add_pos_from_pos_of" class="anchor"></a><code><span><span class="keyword">val</span> add_pos_from_pos_of : <span><span>(<span>(string * int * int * int)</span> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p><code>add_pos_from_pos_of (__POS_OF__ e)</code> is <code>annotated s s' e</code> where <code>s</code> and <code>s'</code> correspond to <code>e</code>'s position in the ocaml file.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_pos_from"><a href="#val-with_pos_from" class="anchor"></a><code><span><span class="keyword">val</span> with_pos_from : <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p><code>add_pos_from loc v</code> is <code>v</code> with the location data from <code>loc</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_pos_from"><a href="#val-add_pos_from" class="anchor"></a><code><span><span class="keyword">val</span> add_pos_from : <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p><code>add_pos_from loc v</code> is <code>v</code> with the location data from <code>loc</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_pos_from_st"><a href="#val-add_pos_from_st" class="anchor"></a><code><span><span class="keyword">val</span> add_pos_from_st : <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p><code>add_pos_from_st a' a</code> is <code>a</code> with the location from <code>a'</code>.</p><p>If both arguments are physically equal, then the result is also physically equal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map2_desc"><a href="#val-map2_desc" class="anchor"></a><code><span><span class="keyword">val</span> map2_desc : 
  <span><span>(<span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'c</span> <a href="../AST/index.html#type-annotated">AST.annotated</a></span></span></code></div><div class="spec-doc"><p>Folder on two annotated types.</p></div></div><h2 id="type-utils"><a href="#type-utils" class="anchor"></a>Type utils</h2><div class="odoc-spec"><div class="spec value anchored" id="val-integer"><a href="#val-integer" class="anchor"></a><code><span><span class="keyword">val</span> integer : <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div><div class="spec-doc"><p>The ASL unconstrained integer type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-underconstrained_integer"><a href="#val-underconstrained_integer" class="anchor"></a><code><span><span class="keyword">val</span> underconstrained_integer : <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div><div class="spec-doc"><p>The ASL under-constrained integer type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-boolean"><a href="#val-boolean" class="anchor"></a><code><span><span class="keyword">val</span> boolean : <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div><div class="spec-doc"><p>The ASL boolean type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div><div class="spec-doc"><p>The ASL string type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-real"><a href="#val-real" class="anchor"></a><code><span><span class="keyword">val</span> real : <a href="../AST/index.html#type-ty">AST.ty</a></span></code></div><div class="spec-doc"><p>The ASL real type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default_t_bits"><a href="#val-default_t_bits" class="anchor"></a><code><span><span class="keyword">val</span> default_t_bits : <a href="../AST/index.html#type-type_desc">AST.type_desc</a></span></code></div></div><h2 id="constructor-helpers"><a href="#constructor-helpers" class="anchor"></a>Constructor helpers</h2><div class="odoc-spec"><div class="spec value anchored" id="val-s_pass"><a href="#val-s_pass" class="anchor"></a><code><span><span class="keyword">val</span> s_pass : <a href="../AST/index.html#type-stmt">AST.stmt</a></span></code></div><div class="spec-doc"><p>An ASL pass statement.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-s_then"><a href="#val-s_then" class="anchor"></a><code><span><span class="keyword">val</span> s_then : <span><a href="../AST/index.html#type-stmt">AST.stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-stmt">AST.stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-stmt">AST.stmt</a></span></code></div><div class="spec-doc"><p><code>s_then s1 s2</code> is <code>s1; s2</code> in ASL.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stmt_from_list"><a href="#val-stmt_from_list" class="anchor"></a><code><span><span class="keyword">val</span> stmt_from_list : <span><span><a href="../AST/index.html#type-stmt">AST.stmt</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-stmt">AST.stmt</a></span></code></div><div class="spec-doc"><p><code>stmt_from_list [s1; ... sn]</code> is <code>s1; ... sn</code> in ASL.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expr_of_int"><a href="#val-expr_of_int" class="anchor"></a><code><span><span class="keyword">val</span> expr_of_int : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div><div class="spec-doc"><p><code>expr_of_int i</code> is the literal expression containing <code>i</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-literal"><a href="#val-literal" class="anchor"></a><code><span><span class="keyword">val</span> literal : <span><a href="../AST/index.html#type-literal">AST.literal</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div><div class="spec-doc"><p><code>literal v</code> is the expression evaluated to <code>v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-var_"><a href="#val-var_" class="anchor"></a><code><span><span class="keyword">val</span> var_ : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div><div class="spec-doc"><p><code>var_ x</code> is the expression <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-binop"><a href="#val-binop" class="anchor"></a><code><span><span class="keyword">val</span> binop : <span><a href="../AST/index.html#type-binop">AST.binop</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div><div class="spec-doc"><p>Builds a binary operation from to sub-expressions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fresh_var"><a href="#val-fresh_var" class="anchor"></a><code><span><span class="keyword">val</span> fresh_var : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-identifier">AST.identifier</a></span></code></div><div class="spec-doc"><p><code>fresh_var &quot;doc&quot;</code> is a fresh variable whose name begins with &quot;doc&quot;.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-global_ignored"><a href="#val-global_ignored" class="anchor"></a><code><span><span class="keyword">val</span> global_ignored : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-identifier">AST.identifier</a></span></code></div><div class="spec-doc"><p>Creates a fresh dummy variable for a global ignored variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_global_ignored"><a href="#val-is_global_ignored" class="anchor"></a><code><span><span class="keyword">val</span> is_global_ignored : <span><a href="../AST/index.html#type-identifier">AST.identifier</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_global_ignored s</code> is true iff <code>s</code> has been created with <code>global_ignored ()</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-constraint_binop"><a href="#val-constraint_binop" class="anchor"></a><code><span><span class="keyword">val</span> constraint_binop : 
  <span><a href="../AST/index.html#type-binop">AST.binop</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-int_constraints">AST.int_constraints</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-int_constraints">AST.int_constraints</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../AST/index.html#type-int_constraints">AST.int_constraints</a></span></code></div><div class="spec-doc"><p><code>constraint_binop PLUS cs1 cs2</code> is the set of constraints given by the element wise application of <code>PLUS</code>.</p></div></div><h2 id="fields,-masks-and-slices-handling"><a href="#fields,-masks-and-slices-handling" class="anchor"></a>Fields, masks and slices handling</h2><div class="odoc-spec"><div class="spec value anchored" id="val-mask_from_set_bits_positions"><a href="#val-mask_from_set_bits_positions" class="anchor"></a><code><span><span class="keyword">val</span> mask_from_set_bits_positions : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Builds a mask from specified positions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inv_mask"><a href="#val-inv_mask" class="anchor"></a><code><span><span class="keyword">val</span> inv_mask : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Flip all the 0/1 in the mask. Doesn't change the 'x'.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slices_to_positions"><a href="#val-slices_to_positions" class="anchor"></a><code><span><span class="keyword">val</span> slices_to_positions : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span> * <span class="type-var">'a</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p><code>slices_to_positions as_int slices</code> evaluates <code>slices</code> and returns a list of all queried positions in the correct order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canonical_fields"><a href="#val-canonical_fields" class="anchor"></a><code><span><span class="keyword">val</span> canonical_fields : <span><span><span>(string * <span class="type-var">'a</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <span class="type-var">'a</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Sorts the fields of a record to allow an element wise comparison.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitfield_get_name"><a href="#val-bitfield_get_name" class="anchor"></a><code><span><span class="keyword">val</span> bitfield_get_name : <span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the name of the bitfield in question.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitfield_get_slices"><a href="#val-bitfield_get_slices" class="anchor"></a><code><span><span class="keyword">val</span> bitfield_get_slices : <span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-slice">AST.slice</a> list</span></span></code></div><div class="spec-doc"><p>Returns the slices corresponding to this bitfield.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_bitfield_opt"><a href="#val-find_bitfield_opt" class="anchor"></a><code><span><span class="keyword">val</span> find_bitfield_opt : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> option</span></span></code></div><div class="spec-doc"><p><code>bitfield_find_opt name bfs</code> is <code>Some (bf)</code> if there exists <code>bf</code> in <code>bfs</code> with <code>name</code>, <code>None</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_bitfields_slices_opt"><a href="#val-find_bitfields_slices_opt" class="anchor"></a><code><span><span class="keyword">val</span> find_bitfields_slices_opt : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../AST/index.html#type-slice">AST.slice</a> list</span> option</span></span></code></div><div class="spec-doc"><p><code>bitfields_find_slices_opt name bfs</code> is <code>Some (slices)</code> if there exists a bitfield with name <code>name</code> and slices <code>slices</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Infix/index.html">Infix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Infix utils.</p></div></div><h2 id="equality-helpers"><a href="#equality-helpers" class="anchor"></a>Equality helpers</h2><p>Most of those take a <code>cmp_expr</code> argument that is the static analyser expression comparison.</p><div class="odoc-spec"><div class="spec value anchored" id="val-expr_equal"><a href="#val-expr_equal" class="anchor"></a><code><span><span class="keyword">val</span> expr_equal : <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-literal_equal"><a href="#val-literal_equal" class="anchor"></a><code><span><span class="keyword">val</span> literal_equal : <span><a href="../AST/index.html#type-literal">AST.literal</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-literal">AST.literal</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slice_equal"><a href="#val-slice_equal" class="anchor"></a><code><span><span class="keyword">val</span> slice_equal : 
  <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-slice">AST.slice</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-slice">AST.slice</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slices_equal"><a href="#val-slices_equal" class="anchor"></a><code><span><span class="keyword">val</span> slices_equal : 
  <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../AST/index.html#type-slice">AST.slice</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../AST/index.html#type-slice">AST.slice</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_equal"><a href="#val-type_equal" class="anchor"></a><code><span><span class="keyword">val</span> type_equal : <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitfield_equal"><a href="#val-bitfield_equal" class="anchor"></a><code><span><span class="keyword">val</span> bitfield_equal : 
  <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-bitfield">AST.bitfield</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitwidth_equal"><a href="#val-bitwidth_equal" class="anchor"></a><code><span><span class="keyword">val</span> bitwidth_equal : 
  <span><span>(<span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-bits_constraint">AST.bits_constraint</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../AST/index.html#type-bits_constraint">AST.bits_constraint</a> <span class="arrow">&#45;&gt;</span></span>
  bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scope_equal"><a href="#val-scope_equal" class="anchor"></a><code><span><span class="keyword">val</span> scope_equal : <span><a href="../AST/index.html#type-scope">AST.scope</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-scope">AST.scope</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scope_compare"><a href="#val-scope_compare" class="anchor"></a><code><span><span class="keyword">val</span> scope_compare : <span><a href="../AST/index.html#type-scope">AST.scope</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-scope">AST.scope</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><h2 id="transformers"><a href="#transformers" class="anchor"></a>Transformers</h2><div class="odoc-spec"><div class="spec value anchored" id="val-lid_of_lexpr"><a href="#val-lid_of_lexpr" class="anchor"></a><code><span><span class="keyword">val</span> lid_of_lexpr : <span><a href="../AST/index.html#type-lexpr">AST.lexpr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-local_decl_item">AST.local_decl_item</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-expr_of_lexpr"><a href="#val-expr_of_lexpr" class="anchor"></a><code><span><span class="keyword">val</span> expr_of_lexpr : <span><a href="../AST/index.html#type-lexpr">AST.lexpr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-case_to_conds"><a href="#val-case_to_conds" class="anchor"></a><code><span><span class="keyword">val</span> case_to_conds : <span><a href="../AST/index.html#type-stmt">AST.stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-stmt">AST.stmt</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slice_as_single"><a href="#val-slice_as_single" class="anchor"></a><code><span><span class="keyword">val</span> slice_as_single : <span><a href="../AST/index.html#type-slice">AST.slice</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span><span class="keyword">val</span> patch : <span>src:<span><span class="type-var">'p</span> <a href="../AST/index.html#type-t">AST.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>patches:<span><span class="type-var">'p</span> <a href="../AST/index.html#type-t">AST.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'p</span> <a href="../AST/index.html#type-t">AST.t</a></span></span></code></div><div class="spec-doc"><p><code>patch ~src ~patches</code> replaces in <code>src</code> the global identifiers defined by <code>patches</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-subst_expr"><a href="#val-subst_expr" class="anchor"></a><code><span><span class="keyword">val</span> subst_expr : <span><span><span>(<a href="../AST/index.html#type-identifier">AST.identifier</a> * <a href="../AST/index.html#type-expr">AST.expr</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-expr">AST.expr</a></span></code></div><div class="spec-doc"><p><code>subst_expr substs e</code> replaces the variables used inside <code>e</code> by their associated expression in <code>substs</code>, if any.</p><p>Warning: constants and statically-evaluated parts are not changed, for example: <code>E_Slice (E_Var &quot;y&quot;, [Slice_Single (E_Var &quot;y&quot;)])</code> will become after <code>subst_expr [(&quot;y&quot;, E_Var &quot;x&quot;)]</code>: <code>E_Slice (E_Var &quot;x&quot;, [Slice_Single (E_Var &quot;y&quot;)])</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_primitive"><a href="#val-no_primitive" class="anchor"></a><code><span><span class="keyword">val</span> no_primitive : <span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-t">AST.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'q</span> <a href="../AST/index.html#type-t">AST.t</a></span></span></code></div><div class="spec-doc"><p><code>no_primitive parsed_ast</code> is <code>parsed_ast</code> if does not contains any primitive. Otherwise, it fails with an assert false.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_simple_expr"><a href="#val-is_simple_expr" class="anchor"></a><code><span><span class="keyword">val</span> is_simple_expr : <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_simple_expr e</code> is true if <code>e</code> does not contain any call to any other subprogram. It has false negative.</p></div></div><h2 id="def/use-analysis"><a href="#def/use-analysis" class="anchor"></a>Def/use analysis</h2><div class="odoc-spec"><div class="spec value anchored" id="val-use_e"><a href="#val-use_e" class="anchor"></a><code><span><span class="keyword">val</span> use_e : <span><a href="ISet/index.html#type-t">ISet.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-expr">AST.expr</a> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-use_ty"><a href="#val-use_ty" class="anchor"></a><code><span><span class="keyword">val</span> use_ty : <span><a href="ISet/index.html#type-t">ISet.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../AST/index.html#type-ty">AST.ty</a> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-use_constant_decl"><a href="#val-use_constant_decl" class="anchor"></a><code><span><span class="keyword">val</span> use_constant_decl : <span><a href="ISet/index.html#type-t">ISet.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../AST/index.html#type-decl">AST.decl</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a></span></code></div><div class="spec-doc"><p><code>use_constant_decl d</code> is the set of other declared names required to have in the environment to be able to type-check d.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-used_identifiers"><a href="#val-used_identifiers" class="anchor"></a><code><span><span class="keyword">val</span> used_identifiers : <span><span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-decl">AST.decl</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-used_identifiers_stmt"><a href="#val-used_identifiers_stmt" class="anchor"></a><code><span><span class="keyword">val</span> used_identifiers_stmt : <span><a href="../AST/index.html#type-stmt">AST.stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dag_fold"><a href="#val-dag_fold" class="anchor"></a><code><span><span class="keyword">val</span> dag_fold : 
  <span><span>(<span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-decl">AST.decl</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../AST/index.html#type-identifier">AST.identifier</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-decl">AST.decl</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="ISet/index.html#type-t">ISet.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-decl">AST.decl</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'p</span> <a href="../AST/index.html#type-t">AST.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>dag_fold def use folder ast a</code> is <code>a |&gt; f d_1 |&gt; ... f d_n</code> where <code>d_i</code> spawns all declarations in AST, but in an order such that <code>use</code>/<code>def</code> relations are respected.</p></div></div><h2 id="standard-functions"><a href="#standard-functions" class="anchor"></a>Standard functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>pair a b</code> is <code>(a, b)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pair'"><a href="#val-pair'" class="anchor"></a><code><span><span class="keyword">val</span> pair' : <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>pair' b a</code> is <code>(b, a)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_equal"><a href="#val-list_equal" class="anchor"></a><code><span><span class="keyword">val</span> list_equal : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>list_equal elt_equal li1 li2</code> is true iff <code>li1</code> and <code>li2</code> are element-wise equal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_compare"><a href="#val-list_compare" class="anchor"></a><code><span><span class="keyword">val</span> list_compare : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>An element wise comparaison for lists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_cross"><a href="#val-list_cross" class="anchor"></a><code><span><span class="keyword">val</span> list_cross : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> list</span></span></code></div><div class="spec-doc"><p><code>list_cross f [a1; ... an] [b1; ... bm]</code> is the list of all <code>f ai bj</code> in a non-specified order.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_concat_map"><a href="#val-list_concat_map" class="anchor"></a><code><span><span class="keyword">val</span> list_concat_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>list_concat_map f l</code> gives the same result as <code>List.concat (List.map f l)</code>. Tail-recursive. Taken from stdlib 4.10.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list_fold_left_map"><a href="#val-list_fold_left_map" class="anchor"></a><code><span><span class="keyword">val</span> list_fold_left_map : 
  <span><span>(<span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span> * <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span> * <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p><code>fold_left_map</code> is a combination of <code>fold_left</code> and <code>map</code> that threads an accumulator through calls to <code>f</code>. Taken from stdlib 4.11.</p></div></div></div></body></html>